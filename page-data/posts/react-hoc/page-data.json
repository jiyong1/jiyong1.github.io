{
    "componentChunkName": "component---src-pages-markdown-remark-frontmatter-slug-tsx",
    "path": "/posts/react-hoc/",
    "result": {"data":{"markdownRemark":{"html":"<p>고차 컴포넌트는 React의 구조적 특성에서 나오는 패턴으로, <strong>컴포넌트 로직을 재사용</strong>하기 위한 React의 고급 기술입니다.</p>\n<p>일반적인 컴포넌트는 부모로부터 받은 props를 UI에 반영하는 반면, 고차 컴포넌트는 <strong>컴포넌트</strong>를 전달받아 새로운 컴포넌트로 변환합니다.</p>\n<p>컴포넌트는 React에서 코드 재사용의 기본 단위 입니다. 하지만, 어떤 패턴에 대해서는 일반적인 컴포넌트 만으로 코드의 중복을 줄일 수 없습니다.</p>\n<p><strong>고차 컴포넌트</strong>는 컴포넌트를 입력받아 어떤 기능을 수행 후 컴포넌트를 반환합니다.\n반복적인 로직을 고차 컴포넌트를 이용해 추상화하면 <strong>공통기능을 분리</strong>할 수 있습니다.\n<br></p>\n<h2>고차 함수</h2>\n<p>고차함수는 고차 함수 내에서 필요로 하는 기능을 수행한 뒤, 인자로 받은 함수를 필요한 시점에 호출합니다.\n이는 자바스크립트에서 함수가 <strong>일급 객체</strong>이기 때문에 가능한 내용입니다.</p>\n<ul>\n<li>일급 객체\n<ul>\n<li>변수에 할당(assignment)할 수 있다.</li>\n<li>다른 함수의 인자(argument)로 전달될 수 있다.</li>\n<li>다른 함수의 결과로서 return될 수 있다.</li>\n</ul>\n</li>\n</ul>\n<br>\n<hr>\n<br>\n<h2>일단 부딪쳐보며 고차 컴포넌트 작성</h2>\n<p>위에도 언급했듯이 일반적인 컴포넌트로 줄일 수 없는 공통적인 요소를 줄이기 위해서 고차 컴포넌트를 사용하는데, 프론트엔드 개발에서 공통적인 부분이 어느 부분인지 고민해 볼 필요가 있었다..</p>\n<p>이제까지 몇 가지 프로젝트를 진행했을 때, 개인적인 경험으로는 상태 관리 라이브러리를 이용해 컴포넌트 개발을 진행할 때, <strong>로그인 상태</strong>에 따라서 다른 UI를 보여주거나, <strong>data fetching</strong>을 해서 UI를 보여줘야 하는 경우가 있을 것 같다고 생각했습니다.</p>\n<p>그래서 일단 간단하게 <strong>redux</strong>를 이용하여 <strong>TDD</strong> 방식으로 일단 부딪쳐보며 개발을 해보았습니다.</p>\n<br>\n<p>먼저, <strong>redux toolkit</strong> 의 <code class=\"language-text\">createSlice</code> 를 이용해서 간단한 reducer를 만들었습니다. 고차 컴포넌트에 집중하기 위해 해당 내용은 생략하겠습니다.</p>\n<ul>\n<li>\n<p>테스트 코드 작성</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> render<span class=\"token punctuation\">,</span> screen <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./test-utils'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> AnyAction <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> MyPage <span class=\"token keyword\">from</span> <span class=\"token string\">'./MyPage'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> authReducer <span class=\"token keyword\">from</span> <span class=\"token string\">'./store/auth'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'user data'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'default data'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">authReducer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token keyword\">as</span> AnyAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> user<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'login HOC'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'unlogin'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyPage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> elem <span class=\"token operator\">=</span> screen<span class=\"token punctuation\">.</span><span class=\"token function\">getByText</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">please login</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>elem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeInTheDocument</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p>테스트 성공을 위한 코드 작성</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useSelector <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UserState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./store/auth'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> RootState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./store'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">MyPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> user <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useSelector</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>RootState<span class=\"token punctuation\">,</span> UserState<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">please login</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">login done</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> MyPage<span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ul>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 534px; margin: 2rem 0\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACq0lEQVQ4y22UyW7acBDGeZGqZd+M9w1jjI1tbDCLQyAhW5MqSZNG6qHP0VMr9dRbpR77jF81g0iIyOEvj8fjzx+/maEQ/v6M6M8XJP++Iv77BEHoQhAdqPoAwXCGcbZGEM5hWiEW+Tk8P4NhDjHJ1hBlF7WGjkbLfD6FwfdrhD9ukfx6QPjzDrrhw3FH8PwJZosNLi7vkc1O4XpjrE9vEI1yuF6K4/VHqLp/KFh6J6FrRMjiFbpayMXzfIN4lKNUkVEsSyhVFFRqKj6UJJSrKqp1jfM7sXrTeBFsCBZqTR2lloqmbMO0Q8hqH7YTQTN8KKrHbg1rCEXzoJsB53v9BC3BfiXGgvQVKg6iGYJwBqsbYTJdI4oX7KDZNtFsW3x2L1Pc7tgH7liQEgTXCybwoymL+0GGQZBBELvsgpxRLCkuOpLDIruzL0b3Bb5pmqi2dTREC5ruQ9EGcNyEO01CBmHQ+rCcCIo+OBDad8qCxYrMiVpd55ia8b4ootrQOV8pKaiWVVSK2+vuZUJSqWmo1l+aUxglS5xf3kM3h5jNN9ic32Ken2N9cgNBctDu9aFMYyj5COoygbZK0dF60I2AeROaOMkZBX2gkKTHuP70hHh0xENr2RF3muauJdkQggGUdQrlJIVylsK8nEKxBui5CWMZZytksxPmy4JxcoSzizuMJyuEcQ5JdrkR5aqCZseG5ofQpgmMPIW9mkKfpxBVl1kTY6e3XYKOuG1Wgdbp6voRy9UVbwX9fHLdkXq8gkEwRd9NEQ8XmCQrtJs2MyM3W4YqD/tzU8jhw+M3HB1f8XzRw10xFXXdETNKxks4/QSy5h2s26uxIbDEi6af2JEzmjuKd38SVEPzSVuyP+BvnQKtGQElbhTTVZR7LNQSLH4mqx7nJKX/5nbsC/4HqV3ziqayWywAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"test1\"\n        title=\"test1\"\n        src=\"/static/939fe1c0952157792198d7dc1803608d/a07a7/test1.png\"\n        srcset=\"/static/939fe1c0952157792198d7dc1803608d/772e8/test1.png 200w,\n/static/939fe1c0952157792198d7dc1803608d/e17e5/test1.png 400w,\n/static/939fe1c0952157792198d7dc1803608d/a07a7/test1.png 534w\"\n        sizes=\"(max-width: 534px) 100vw, 534px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<p>무사히 성공했습니다 ! 그러나 저희가 원하는 것은 이러한 내용이 아닙니다. 좀 더 컴포넌트가 하는 일을 명확히 하고, <strong>공통적인 요소</strong>를 고차 컴포넌트를 이용해 제거하고자 합니다. 그래서 <strong>withAuth</strong>라는 HOC를 만들어보고자 합니다. 먼저 테스트 코드를 수정하겠습니다 !</p>\n<br>\n<ul>\n<li>\n<p>테스트 코드 수정</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> render<span class=\"token punctuation\">,</span> screen<span class=\"token punctuation\">,</span> testStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./test-utils'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> withLogin <span class=\"token keyword\">from</span> <span class=\"token string\">'./withLogin'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> AnyAction <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> MyPage <span class=\"token keyword\">from</span> <span class=\"token string\">'./MyPage'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> authReducer<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> login <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./store/auth'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'redux auth'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'default auth data'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">authReducer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token keyword\">as</span> AnyAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> user<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dispatch login'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">authReducer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span><span class=\"token string\">'jiyong'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      user<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'jiyong'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'login HOC'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> PageWithAuth <span class=\"token operator\">=</span> <span class=\"token function\">withLogin</span><span class=\"token punctuation\">(</span>MyPage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'unlogin'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PageWithAuth</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>screen<span class=\"token punctuation\">.</span><span class=\"token function\">getByText</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">please login</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeInTheDocument</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'login'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PageWithAuth</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    testStore<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">login</span><span class=\"token punctuation\">(</span><span class=\"token string\">'jiyong'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>screen<span class=\"token punctuation\">.</span><span class=\"token function\">getByText</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">jiyong</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeInTheDocument</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>위의 테스트는 올바르게 <strong>reducer</strong>가 작동하는지 확인하기 위한 테스트</li>\n<li>아래의 테스트는 로그인 상황에 따른 <strong>HOC</strong> 테스트</li>\n</ul>\n</li>\n</ul>\n<br>\n<p>먼저 위에 사용되었던 <code class=\"language-text\">MyPage</code> 컴포넌트를 로그인이 되어있든 안되어있든 관심없고, 그냥 전달해주는데로 렌더링 해주는 역할로 변경시키겠습니다. 그리고 <strong>withLogin</strong> 고차 컴포넌트를 작성하여 로그인의 상황에 따라 렌더링해줄 수 있도록 코드를 작성해보겠습니다.</p>\n<ul>\n<li>\n<p>MyPage 컴포넌트 수정</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Props</span> <span class=\"token punctuation\">{</span>\n  user<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">MyPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> user <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> Props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">hi! </span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> MyPage<span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p><strong>withLogin</strong> 작성</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ComponentType <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useSelector <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UserState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./store/auth'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> RootState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./store'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">withLogin</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">P</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>ChildComponent<span class=\"token operator\">:</span> ComponentType<span class=\"token operator\">&lt;</span><span class=\"token constant\">P</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Wrapper</span><span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> Omit<span class=\"token operator\">&lt;</span><span class=\"token constant\">P</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'user'</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> user <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useSelector</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>RootState<span class=\"token punctuation\">,</span> UserState<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ChildComponent</span></span> <span class=\"token attr-name\">user</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">}</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">(</span>props <span class=\"token keyword\">as</span> <span class=\"token constant\">P</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">please login</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> withLogin<span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ul>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 576px; margin: 2rem 0\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACmUlEQVQ4y41U227aQBT0n1RqwBhsML7fuNiATcAXAgkxJW2aVG0VKVUfKuW5v9Ov6Es/bKpziN26ykMfDuyud8czs3MsZD+fEP94xPrXE7xve6gdH319hGS5w8fPX7FO95gtChzffkKal4iXW+SbA5SBj07XgtSz638qwbovsPhyxO77A8L9FpYRYZFssFztEEYZTDvCUJ/ADxIYVgjdnMJ25gzS7hgNUCqh/UqD2vPhmDOM/CW8UYJplMLx5nyAmPTVE5uhPobcdyHJNgbDgOfVs5qhpNgQuyZaqgXdDmE5M2jGhNlQOd6C12jsBXENQoC0Tv9NwJ4Nue9B1nyYTsQAk3DNm0meMvB4bLtzPlDJFCWTx6L0j2T6IYC8KFnqeLrC9vIGXdnhQ9XmavxSNRhWyLLhQzMnfAkkjxgNhiMekwU07ylu4/CLgPUD1YFuhXD9GF6QsNwKnKzoq8H/MWyJOlrkhWyhLZnsWcVEIW9lF4rsoSOaENvms3yKTOWh2fSQ2FjOnLMWjM/hevFJLjFSHXQNDz0ngOyOoARjdHsOR4lsIAVkS4NhebjH5uKIaZThurxHXhyQb97A8xMo0RRaEcMoV9DLFZx3BYbqmF8YzjJk+TVf4t8XJhQXRwbcbG84Pq9bQ5ANYsfEIAqh5TGMwxr6YQX7mP0BjFKssz38UdIEvLy6xb68w8XuBncfHhmYpNCmMEw5zFGUIUm2UBSP/Sbvzto6ztra6eWSWUdLIJm37x8QJ1vuAPKHMkiH6KMQzTOcp1fckoYdcgIor+erS2Y4jwtmSa1KiRAo1JMwfc5dwLdMhletRQDUPRQjWlO1EV8EzauMUqSICJVACxQTmtDG6garTao2roH4CyOZddtVJfLaSfJvMDkQpfpqXf4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"test2\"\n        title=\"test2\"\n        src=\"/static/45220499f69218a5bdc9f189b6dd9e3e/533c1/test2.png\"\n        srcset=\"/static/45220499f69218a5bdc9f189b6dd9e3e/772e8/test2.png 200w,\n/static/45220499f69218a5bdc9f189b6dd9e3e/e17e5/test2.png 400w,\n/static/45220499f69218a5bdc9f189b6dd9e3e/533c1/test2.png 576w\"\n        sizes=\"(max-width: 576px) 100vw, 576px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<p>성공했습니다 😙</p>\n<p>이제 위의 withLogin 고차 컴포넌트를 사용한다면, 권한이 필요한 상황에 대해서 로그인의 여부를 굳이 가져올 필요 없이 (코드의 중복을 줄이고) 렌더링 할 UI에 대해 집중할 수 있을 것 같습니다 !</p>\n<p>이렇게 간단한 예제 이외에도 데이터 fetching의 상황에 따라 로딩 컴포넌트를 보여줄 것인지, 아니면 데이터를 props로 전달하여 원하는 컴포넌트를 렌더링할 것인지 등..., 여러가지 상황에서 쓰일 수 있을 것 같습니다.</p>\n<p>이러한 내용들을 학습하면서 드는 생각이지만 개발자로서 무언가 구현을 위해 노력하는 것은 당연하지만, 그러면서도 <strong>함수 혹은 모듈의 역할을 명확히 하여 유지/보수 측면에서 좋은 코드를 작성하기 위해 고민하는 것도 중요하다</strong>라는 것을 다시 한번 느낄 수 있었습니다..! 🤯</p>","frontmatter":{"date":"October 28, 2021","slug":"/posts/react-hoc","title":"[React] 고차 컴포넌트 (Higher Order Component)","description":"🧐 2021.10.28 거북목 스터디, React의 고차 컴포넌트를 TDD 방식으로 일단 부딪쳐보자. 😵‍💫"}}},"pageContext":{"id":"644f99c7-f3d9-501b-a916-0d4db9d7e053","frontmatter__slug":"/posts/react-hoc","__params":{"frontmatter__slug":"posts"}}},
    "staticQueryHashes": []}