{
    "componentChunkName": "component---src-pages-markdown-remark-frontmatter-slug-tsx",
    "path": "/posts/10-asynchronous/",
    "result": {"data":{"markdownRemark":{"html":"<p>자바스크립트 엔진은 <strong>단 하나의 실행 컨텍스트 스택(콜 스택)</strong> 을 갖는다. 즉, 동시에 2개 이상의 함수를 실행할 수 없다는 뜻이다. 이처럼 자바스크립트엔진은 한 번에 하나의 일만 수행할 수 있는 <strong>싱글 스레드 (single thread) 방식으로 동작한다.</strong> 싱글스레드 방식은 한 번에 하나의 일만 수행할 수 있기 때문에 하나의 일이 어느정도 시간이 걸리는 경우 <strong>블로킹 (blocking)</strong> 이 발생한다.</p>\n<p><strong>비동기(asynchronous) 처리</strong>는 위에서 언급한 블로킹을 방지하기 위해 사용하는 방식으로 현재 실행 중인 태스크가 종료되지 않은 상태라 하더라도 다음 일을 수행한다.</p>\n<ul>\n<li><code class=\"language-text\">동기 처리</code>\n<ul>\n<li>일을 순서대로 처리하므로 <strong>실행 순서가 보장된다는 장점</strong>이 있다.</li>\n<li>앞선 일의 수행이 완료될 때까지 <strong>미래의 일들이 블로킹 되는 단점</strong>이 있다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">비동기 처리</code>\n<ul>\n<li><strong>현재 실행 중인 일이 종료되지 않더라도 미래의 일을 곧바로 실행</strong>하므로 블로킹이 일어나지 않는다.</li>\n<li><strong>실행 순서가 보장되지 않는 단점</strong>이 있다.</li>\n</ul>\n</li>\n</ul>\n<br>\n<p><code class=\"language-text\">setTimeout</code>, <code class=\"language-text\">setInterval</code>, <code class=\"language-text\">HTTP 요청</code>, <code class=\"language-text\">이벤트 핸들러</code>는 비동기 처리 방식으로 동작한다.</p>\n<br>\n<h2>1. Event Loop와 Task Queue</h2>\n<p>브라우저가 동작하는 것을 살펴보면 많은 일이 <strong>동시적으로</strong> 처리되는 것처럼 느껴진다. 하지만 위에서 언급한 것과 같이 자바스크립트는 싱글 스레드 방식으로 한 번에 하나의 일만 처리할 수 있다.</p>\n<p>자바스크립트의 <strong>동시성 (Concurrency)</strong> 을 지원하는 것이 바로 <code class=\"language-text\">Event Loop</code>이다.</p>\n<p>이벤트 루프는 브라우저에 내장되어 있는 기능 중 하나이다.</p>\n<p>브라우저 환경을 그림으로 표현하면 다음과 같다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; margin: 2rem 0\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAQACBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe6bBmP/xAAXEAADAQAAAAAAAAAAAAAAAAAAASBB/9oACAEBAAEFAnGn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAFxAAAwEAAAAAAAAAAAAAAAAAABARAf/aAAgBAQABPyE5XE//2gAMAwEAAgADAAAAEHMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhAAAQUBAAAAAAAAAAAAAAAAAQARITFBEP/aAAgBAQABPxACTtYiq8NWoVxkmluf/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"browserenv\"\n        title=\"browserenv\"\n        src=\"/static/6d9c5de88f5858d49188f3c95aecccc4/4b190/browserenv.jpg\"\n        srcset=\"/static/6d9c5de88f5858d49188f3c95aecccc4/e07e9/browserenv.jpg 200w,\n/static/6d9c5de88f5858d49188f3c95aecccc4/066f9/browserenv.jpg 400w,\n/static/6d9c5de88f5858d49188f3c95aecccc4/4b190/browserenv.jpg 800w,\n/static/6d9c5de88f5858d49188f3c95aecccc4/e5166/browserenv.jpg 1200w,\n/static/6d9c5de88f5858d49188f3c95aecccc4/eea4a/browserenv.jpg 1280w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<p>자바스크립트 엔진은 크게 2개의 영역으로 구분할 수 있다.</p>\n<ul>\n<li>콜 스택\n<ul>\n<li>이전에 정리한 내용으로 소스코드 평가 과정에서 생성된 실행 컨텍스트가 추가되고 제거되는 스택 (LIFO) 자료구조인 실행 컨텍스트 스택이 콜 스택이다.</li>\n</ul>\n</li>\n<li>힙\n<ul>\n<li>힙은 객체가 저장되는 메모리 공간이다. 실행 컨텍스트는 힙에 저장되어 있는 객체를 참조한다.</li>\n<li>객체는 원시 값과 다르게 크기가 정해져 있지 않기 때문에 할당해야 할 메모리 공간의 크기를 런타임에 결정해야 한다. 따라서 힙은 구조화 되어 있지 않다는 특징이 있다.</li>\n</ul>\n</li>\n</ul>\n<br>\n<p>위와 같이 자바스크립트 엔진은 단순하게 일을 요청하면 콜 스택을 통해 요청된 작업을 순차적으로 수행할 뿐이다. 따라서 <strong>비동기 처리에서 코드 평가와 실행을 제외한 다른 모든 처리는 자바스크립트 엔진을 구동하는 환경인 브라우저 혹은 Node.js가 담당한다.</strong></p>\n<ul>\n<li>\n<p>태스크 큐</p>\n<ul>\n<li>비동기 함수의 콜백 함수 또는 이벤트 핸들러가 일시적으로 보관되는 영역이다.</li>\n</ul>\n</li>\n<li>\n<p>이벤트 루프</p>\n<ul>\n<li>콜 스택에 현재 실행 중인 실행 컨텍스트가 있는지, 태스크 큐에 대기 중인 함수가 있는지 계속해서 확인한다. 그리고 <strong>만약 콜 스택이 비어 있는데 태스크 큐에서 대기 중인 함수가 있다면 이벤트 루프는 순차적으로 (큐는 FIFO) 대기 중인 함수를 콜 스택으로 이동시킨다.</strong></li>\n</ul>\n</li>\n</ul>","frontmatter":{"date":"May 06, 2021","slug":"/posts/10-asynchronous","title":"[JavaScript] 비동기 프로그래밍","description":"(모던 자바스크립트 deep dive) 자바스크립트의 비동기 프로그래밍 🧐"}}},"pageContext":{"id":"c362696e-3075-5879-bd13-a2619956c38f","frontmatter__slug":"/posts/10-asynchronous","__params":{"frontmatter__slug":"posts"}}},
    "staticQueryHashes": []}