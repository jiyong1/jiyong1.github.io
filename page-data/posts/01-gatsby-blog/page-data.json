{
    "componentChunkName": "component---src-pages-markdown-remark-frontmatter-slug-tsx",
    "path": "/posts/01-gatsby-blog/",
    "result": {"data":{"markdownRemark":{"html":"<p>이번 화에서는 자동 배포를 해보도록 하겠습니다 😊</p>\n<p>제가 구현한 방법이 정답은 아니라는 것을 명심해주세요.. 🙃</p>\n<p>그럼 매우 부족하지만 저의 삽질기를 읽어주셔서 미리 감사드립니다.. 🤪</p>\n<br>\n<hr>\n<br>\n<h2>자동 배포 과정</h2>\n<p>제 블로그의 자동 배포 과정은 다음과 같습니다 !</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 649px; margin: 2rem 0\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZElEQVQoz5WTW2+CQBCF+f+/yAfti5r46IvFG2pUMCBCrQp4Pc03Zg1pk6adZNhlmXPmnMniSdJut1O321Wj0VCv19Nbq6Vms6lOp6MgCCjR4/F45W/h8YiiSJfLRbfbTZPJVO++r9PpZAVJkuh8Pr9ICb6FYajNZmNYl9R6DkQUZaWPKNBn6CvPMyPYbrfWqB7Ul2X5Qx3uPJTN53Plea71eq00TZXEsRHZPklsJCiA5Hq9arVa6X6/2zqbzQzPebvdfhKORiPt93ubFzkNAiuEMI5jIwRcFIWNZrlcmiIwi8XCmhNGyMbZgmQ8Hms4HBrx4XAw5XT/bpkmzBYcyhmPWaYAFU4Ng0ZNlmWWvGOvHjSAkGZgaAD+eDw+CauqUr/fl+/7GgwGtmfFjlOIXRSzdzfCqas3NEIKsAiIoIAEDIgVtajhHKtgXHLm7qjn7hYf6nftv+FwL0LsOOn1v+Kv6XBfILRK2oqGn18AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gatsby_cicd\"\n        title=\"gatsby_cicd\"\n        src=\"/static/c561400d0476e9833fbf5797e9e2bd5e/7762d/gatsby_cicd.png\"\n        srcset=\"/static/c561400d0476e9833fbf5797e9e2bd5e/772e8/gatsby_cicd.png 200w,\n/static/c561400d0476e9833fbf5797e9e2bd5e/e17e5/gatsby_cicd.png 400w,\n/static/c561400d0476e9833fbf5797e9e2bd5e/7762d/gatsby_cicd.png 649w\"\n        sizes=\"(max-width: 649px) 100vw, 649px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol>\n<li><strong>{github username}.github.io</strong> repository의 <code class=\"language-text\">dev</code> 브랜치에 push를 한다.</li>\n<li><strong>Travis CI</strong>에서 이를 알아차리고 명령을 수행한다.\n<ul>\n<li>gatsby cli를 통해 프로젝트를 <strong>build</strong>한다.</li>\n<li><strong>Travis CI</strong>에서 <code class=\"language-text\">main</code> 브랜치에 자동 푸쉬 한다.</li>\n</ul>\n</li>\n</ol>\n<p>이전에 <code class=\"language-text\">Docker</code>를 학습하면서 <strong>Travis CI</strong>를 사용한 경험이 있어서 저는 Travis CI를 사용하였습니다. 꼭 그래야만 하는건 아니니 다른 방법을 사용해서 하셔도 됩니다 😀</p>\n<br>\n<h2>자동 배포 하기</h2>\n<p><a href=\"https://www.gatsbyjs.com/docs/how-to/previews-deploys-hosting/how-gatsby-works-with-github-pages/#gatsby-skip-here\" class=\"brown-color\">gatsby 공식문서</a>를 참고하여 진행하였습니다 !</p>\n<ol>\n<li>\n<p><code class=\"language-text\">gh-pages</code> 패키지 다운로드</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">npm</span> i -D gh-pages</code></pre></div>\n</li>\n<li>\n<p><strong>script</strong> 작성</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"script\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"deploy\"</span><span class=\"token operator\">:</span> \"gatsby build &amp;&amp; gh-pages -d public -b main -r https<span class=\"token operator\">:</span><span class=\"token comment\">//$GH_TOKEN@github.com/&lt;github username>/&lt;github repository name>.git</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">GH_TOKEN</code> 은 Travis CI를 통해 환경 변수로 등록해주어야 합니다 !</li>\n<li><code class=\"language-text\">github username</code>과 <code class=\"language-text\">github repository name</code>을 형식에 맞게 작성해주세요 !</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">GH_TOKEN</code> 발급 받기</p>\n<ul>\n<li>github <strong>Settings</strong> > <strong>Developer settings</strong> > <strong>Personal access tokens</strong>로 이동</li>\n<li><strong>Generate new token</strong>을 통해 토큰 생성</li>\n<li><code class=\"language-text\">public repo</code>만 선택하고 토큰을 생성해도 됩니다 !\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; margin: 2rem 0\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABcUlEQVQoz3VSi5KDIBDz/7/x3q0PUATFBwUhN7uivWvvnMmIwmaTLMXX5YprWWF1DjFGbNt2B31H/EBC2BJiSvjvKaq6gRASfa/Rdup8CyEg+xG19mi0Q6kc5ODRmIDlFoGUEONOfiClhEJrDefcry6kdBgtRmthjIG1FnYcEbzfD+TiR1CDYpoXXK5ku4S1E5/3PkC2HSuVrYIZxrPZXvxsNWWVxUXdQLaVUggh8Ca9O9VD9ZohO4VbVveXspPwUFjVNTqlsFHypDAEVkekBFrbaToL/3pOhfM8Q2vDBevqToVkc89xgp1mXlO2nPHDQA51tF8I2bJlskTNaZMU9tpAm4GJCfRNDb33XLiTxEx0rCNN2eD94xMvr29w7paH4tEIiVpICNnxgKhx3QiUVcPkdE+fp0yExkC2LRes+fr4w3JWR7aPCEg13YYjs7vKrFD1Pdq24ztHXfcMN4yjZQLKlmF30L95WdgNZX2qywq/AX53V8HAuSY1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"generate_token\"\n        title=\"generate_token\"\n        src=\"/static/f3d2ce7382e6a75679a61acb5c5d2592/5a190/generate_token.png\"\n        srcset=\"/static/f3d2ce7382e6a75679a61acb5c5d2592/772e8/generate_token.png 200w,\n/static/f3d2ce7382e6a75679a61acb5c5d2592/e17e5/generate_token.png 400w,\n/static/f3d2ce7382e6a75679a61acb5c5d2592/5a190/generate_token.png 800w,\n/static/f3d2ce7382e6a75679a61acb5c5d2592/c1b63/generate_token.png 1200w,\n/static/f3d2ce7382e6a75679a61acb5c5d2592/61946/generate_token.png 1546w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></li>\n</ul>\n</li>\n<li>\n<p><strong>Travis CI</strong> 환경 변수 등록하기 (<code class=\"language-text\">GH_TOKEN</code>)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; margin: 2rem 0\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwklEQVQY012PC27EIAxEuf/hcoVUrZqfumw+gLENTAUVq01HesKWxmZstm3DNE2w1mJZlkbt53nGuq5gZozjiGEY8NyfqCqloOu9rjIhRlAIoEAI9SWCuxxyzo068F73JZ2qlDMOIuxEMFEFkgSsgiiMqAxRuQ11NCekkl99/0RUsX9/wn59wDj2+Lls42TX4CS3JH8pUvPs/kBSvZ1bE3qOcDHCRCLYh8V5nO1sFbmZX0Mp4Tqv5vPB/1tY4ETwoIhfSSmGNt0uMaoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"travis_env_01\"\n        title=\"travis_env_01\"\n        src=\"/static/e09938e01e33d2da9f29b6fb0d9fc103/5a190/travis_env_01.png\"\n        srcset=\"/static/e09938e01e33d2da9f29b6fb0d9fc103/772e8/travis_env_01.png 200w,\n/static/e09938e01e33d2da9f29b6fb0d9fc103/e17e5/travis_env_01.png 400w,\n/static/e09938e01e33d2da9f29b6fb0d9fc103/5a190/travis_env_01.png 800w,\n/static/e09938e01e33d2da9f29b6fb0d9fc103/c1b63/travis_env_01.png 1200w,\n/static/e09938e01e33d2da9f29b6fb0d9fc103/29007/travis_env_01.png 1600w,\n/static/e09938e01e33d2da9f29b6fb0d9fc103/de9fe/travis_env_01.png 2146w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; margin: 2rem 0\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA3klEQVQoz31R7Y6EIAzk/Z/Rv2qiYvhQQEBmM1253G02RzKZ1rZTHNQeI9YzwKaE1hru1vDtSO2+Bf8dZfYd3jlYY2CthdYa0zRhHMcfnucZ27YJ1nXFcRy4rgspJeEexxihnHPyIT5FNlOAWJZFBCjEZcYYAXs4/InzPKFCCBL0TTlnlFK+grUO9nKO4j2nHcp7D6LWKvgjwrxWGfhd/4wpRBYPu8lkGh+8R7kSwMacgZwRnptwqD8OY96Kf0hmPgzDW7CD71utRdFauJWCljPaI9CX9n7ekN71Gj1/AQzUIfnxdGVvAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"travis_env_02\"\n        title=\"travis_env_02\"\n        src=\"/static/55399daef1b3a8e63d8bf1f48cd17156/5a190/travis_env_02.png\"\n        srcset=\"/static/55399daef1b3a8e63d8bf1f48cd17156/772e8/travis_env_02.png 200w,\n/static/55399daef1b3a8e63d8bf1f48cd17156/e17e5/travis_env_02.png 400w,\n/static/55399daef1b3a8e63d8bf1f48cd17156/5a190/travis_env_02.png 800w,\n/static/55399daef1b3a8e63d8bf1f48cd17156/c1b63/travis_env_02.png 1200w,\n/static/55399daef1b3a8e63d8bf1f48cd17156/29007/travis_env_02.png 1600w,\n/static/55399daef1b3a8e63d8bf1f48cd17156/f238d/travis_env_02.png 2078w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n<li>\n<p><code class=\"language-text\">.travis.yml</code> 작성하기</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">language</span><span class=\"token punctuation\">:</span> node_js\n<span class=\"token key atrule\">before_script</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> npm install <span class=\"token punctuation\">-</span>g gatsby<span class=\"token punctuation\">-</span>cli\n<span class=\"token key atrule\">node_js</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> lts/*\n<span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span> script\n  <span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span> npm install <span class=\"token important\">&amp;&amp;</span> npm run deploy\n  <span class=\"token key atrule\">skip_cleanup</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branch</span><span class=\"token punctuation\">:</span> dev</code></pre></div>\n<ul>\n<li>공식문서에는 <code class=\"language-text\">node_js</code>의 버전을 <strong>10</strong>으로 하였는데, 저는 오류가 발생했습니다 (gh-pages 버전과 호환이 안되는 것 같아요). 그래서 가장 최신의 lts 버전으로 변경하였습니다 !</li>\n<li>deploy를 수행하기 전에 <code class=\"language-text\">before_script</code>를 통해서 <code class=\"language-text\">gatsby-cli</code>를 설치합니다.</li>\n<li><code class=\"language-text\">package.json</code>에 있는 <strong>dependencies</strong>들을 다운로드 받고, sciprt에 등록해두었던 deploy를 수행합니다.</li>\n<li><code class=\"language-text\">dev</code> 브랜치에 푸쉬되었을때만 위와 같은 명령들을 수행합니다 !</li>\n</ul>\n</li>\n</ol>\n<p>이제 <code class=\"language-text\">dev</code> 브랜치에 push하시면 자동으로 build하여 main branch에 push하게 될겁니다.. <del>물론 성공했다면..</del></p>\n<p>여러분의 성공을 기원합니다.. 긴 글 읽어주셔서 감사합니다 ! 😁</p>","frontmatter":{"date":"October 06, 2021","slug":"/posts/01-gatsby-blog","title":"일단 부딪쳐보며 Gatsby 기술 블로그 만들기 1화","description":"🤯  gatsby blog를 Travis CI를 이용해서 자동 배포 해보자"}}},"pageContext":{"id":"b40bfe95-0027-5b34-8dee-5e833091fb0a","frontmatter__slug":"/posts/01-gatsby-blog","__params":{"frontmatter__slug":"posts"}}},
    "staticQueryHashes": []}