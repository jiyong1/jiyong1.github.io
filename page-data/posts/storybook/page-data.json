{
    "componentChunkName": "component---src-pages-markdown-remark-frontmatter-slug-tsx",
    "path": "/posts/storybook/",
    "result": {"data":{"markdownRemark":{"html":"<blockquote class=\"brown-border bg-soft\">\n<p>UI Development Tool</p>\n</blockquote>\n<p><code class=\"language-text\">Storybook</code> 은 UI 개발 툴로 컴포넌트를 하나씩 렌더링 시킴으로써 개발을 더 쉽고 빠르게 도와주는 도구이다.</p>\n<p><code class=\"language-text\">Storybook</code> 를 사용함으로써 재사용 가능한 컴포넌트들을 시각적으로 테스트해보고, 버그를 사전에 방지할 수 있다.</p>\n<br>\n<h2>⭐️ Install Storybook</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ npx sb init</code></pre></div>\n<ul>\n<li>sb init은 비어있는 프로젝트에서 사용하는 것이 아니다.</li>\n<li>이렇게 사용하면 내부적으로 <strong>tranpiler</strong>로 <code class=\"language-text\">babel</code> 을 사용하는 것 같다. 번들링은 당연하게 <code class=\"language-text\">webpack</code>을 사용한다.</li>\n<li>팀의 프로젝트 웹팩 환경 설정과 동일한 환경 customize를 진행하고자 했으나, 위의 방식으로 init 을 하게되면 webpack 4버전을 사용하고 있어 오류가 발생하게 된다.</li>\n</ul>\n<br>\n<ul>\n<li>webpack 5버전으로 storybook 환경 구성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ npx sb init --builder webpack5</code></pre></div>\n<br>\n<hr>\n<br>\n<h2>🔧 Storybook Webpack configuration</h2>\n<p>각 확장자 별 로더를 팀이 설정한 로더로 사용하기 위해서 <code class=\"language-text\">.storybook/main.js</code> 파일에 다음의 코드를 추가했다.</p>\n<ul>\n<li>swc-loader 등의 설정을 사용하기 위해 팀의 webpack config 파일을 가져온다.</li>\n<li>alias, rules를 팀의 설정으로 변경한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> custom <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../config/webpack/webpack.common'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ... addons, stories, framework, ...</span>\n  <span class=\"token function-variable function\">webpackFinal</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">config</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">module</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> rules <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> alias <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> custom<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>config<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">module</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>config<span class=\"token punctuation\">.</span>module<span class=\"token punctuation\">,</span> rules <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>config<span class=\"token punctuation\">.</span>resolve<span class=\"token punctuation\">,</span>\n        alias<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<hr>\n<br>\n<h2>💈 Decorators</h2>\n<p><code class=\"language-text\">emotion</code> , <code class=\"language-text\">styled-components</code> 를 사용하면 몇 가지 theme을 전달받아 사용할 수 있는데, storybook 에서도 이 같은 것들을 전달받기 위해 <strong>decorators</strong> 를 설정하여야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// .storybook/preview.js</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> decorators <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">(</span><span class=\"token parameter\">Story</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RecoilRoot</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThemeProvider</span></span> <span class=\"token attr-name\">theme</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>theme<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">GlobalStyle</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Story</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ThemeProvider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">RecoilRoot</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p>위의 데코레이터는 앞으로 작성할 <strong>모든 스토리에 적용된다.</strong> 이외에도 <strong>스토리북 템플릿</strong>, 혹은 <strong>로컬 스토리북</strong> 에도 데코레이터를 달아서 스타일을 적용하는 등의 기능을 구현할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 아래의 데코레이터는 파일 내의 모든 스토리에 적용된다.</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  title<span class=\"token operator\">:</span> <span class=\"token string\">'My Story'</span><span class=\"token punctuation\">,</span>\n  component<span class=\"token operator\">:</span> MyStory<span class=\"token punctuation\">,</span>\n  decorators<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">(</span>Story<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n        <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'400px'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'black'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token string\">'1rem'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Story</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">as</span> ComponentMeta<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> MyStory<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">const</span> Template<span class=\"token operator\">:</span> ComponentStory<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> MyStory<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyStory</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> base <span class=\"token operator\">=</span> <span class=\"token function\">Template</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nbase<span class=\"token punctuation\">.</span>args <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  isBgBlack<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 아래의 데코레이터는 로컬 데코레이터로 아래의 스토리에만 적용된다.</span>\n<span class=\"token keyword\">const</span> backgroundWhite <span class=\"token operator\">=</span> <span class=\"token function\">Template</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nbase<span class=\"token punctuation\">.</span>args <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  isBgBlack<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\nbase<span class=\"token punctuation\">.</span>decorators <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">(</span>Story<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'white'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Story</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>직접 실험해보지는 않았지만 조사해본 결과 마치 <code class=\"language-text\">CSS 우선순위</code> 처럼 <strong>local > Template > preview</strong> 으로 우선순위가 local이 가장 높다고 한다.</p>\n<br>\n<hr>\n<br>\n<h2>📐 Controls</h2>\n<p>상태 혹은 Props의 변경에 따라서 UI 상태가 어떻게 바뀌는지 확인하기 위해 이제까지 vscode를 들어가서 코드 수정하고.. 다시 확인하고.. 이 같은 과정을 매일 반복했다.</p>\n<p><strong>Controls</strong> 는 코드를 직접 변경하지 않아도 Storybook에서 바꿔가며 확인할 수 있는 기능이다.</p>\n<p>이보다 더 강력한 점은 <strong>데이터 타입과 해당 타입을 가진 속성</strong> 을 입력한다면 손쉽게 지정한 타입내에서 값을 변경하여 즉각적으로 UI를 확인할 수 있다는 점이다. 속성 설정은 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Button.stories.js|jsx|ts|tsx</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Button <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./Button'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">'Button'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">component</span><span class=\"token operator\">:</span> Button<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">argTypes</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">variant</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'primary'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'secondary'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">control</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'radio'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 작성하면 버튼의 <code class=\"language-text\">variant</code> 속성을 primary와 secondary 중 하나만 선택할 수 있도록 radio 버튼을 controls에서 제공한다.</p>\n<br>\n<p>또한 <code class=\"language-text\">preview.js</code> 에서는 다음과 같은 코드를 볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> parameters <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">controls</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">matchers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(background|color)$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">Date$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이 덕분에 아래와 같은 방식으로 색을 변경시켜보며 즉각적으로 UI를 확인할 수 있다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/62745840/144991568-f8c54c18-b43a-4e01-8b8d-598ef5e61a3a.gif\" alt=\"color-controls.gif\"></p>\n<br>\n<hr>\n<br>\n<h2>📝 Storybook 작성해보기</h2>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ComponentStory<span class=\"token punctuation\">,</span> ComponentMeta <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@storybook/react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> MyComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/MyComponent'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  title<span class=\"token operator\">:</span> <span class=\"token string\">'Path/To/MyComponent'</span><span class=\"token punctuation\">,</span>\n  component<span class=\"token operator\">:</span> MyComponent<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">as</span> ComponentMeta<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> MyComponent<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> Template<span class=\"token operator\">:</span> ComponentStory<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> MyComponent<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>MyComponent <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> Basic <span class=\"token operator\">=</span> <span class=\"token function\">Template</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nBasic<span class=\"token punctuation\">.</span>args <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  value<span class=\"token operator\">:</span> <span class=\"token string\">'basic'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> WithProp <span class=\"token operator\">=</span> <span class=\"token function\">Template</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nWithProp<span class=\"token punctuation\">.</span>args <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  value<span class=\"token operator\">:</span> <span class=\"token string\">'prop'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">export default</code> : 어떤 컴포넌트의 Story인지 작성\n<ul>\n<li>title : <code class=\"language-text\">/</code> 를 통해 계층을 구분할 수있다. 예를 들어 <code class=\"language-text\">common/</code> 으로 시작하는 story는 <code class=\"language-text\">common</code> 계층 아래에 속하게 된다.</li>\n<li>decorators, parameters, args 등은 파일내의 아래의 모든 스토리에 적용된다.</li>\n</ul>\n</li>\n<li>아래의 Basic, WithProp 등의 <strong>로컬 단계 스토리</strong>에도 decorators 등의 속성을 따로 설정할 수 있다.</li>\n</ul>\n<br>\n<hr>\n<br>\n<h2>🔗 Addons</h2>\n<p><code class=\"language-text\">addons</code> 라는 plugin 시스템이 있습니다. 자체적으로 지원하는 addon 이외에도 addon을 설정하여 추가 기능을 사용할 수 있다.</p>\n<p>아직은 사용할 일이 없어 찾아보지는 않았지만, react-router 등의 기능을 지원하는 addon도 존재한다고 한다. 🤯</p>\n<br>\n<hr>\n<br>\n<h2>🖥 Chromatic Deployment</h2>\n<blockquote class=\"brown-border bg-soft\">\n<p><a href=\"https://storybook.js.org/tutorials/intro-to-storybook/react/ko/deploy/\" class=\"brown-color\">공식문서</a></p>\n</blockquote>\n<p>Storybook을 사용하면서 팀원과 개발할 때 UI의 결과를 보여주기 위해서 Storybook을 빌드하여 배포하면 코드 리뷰 하는 과정에서 많은 이점을 얻을 것이라고 생각했다. 그래서 배포에 관해 알아보는 과정에서 <code class=\"language-text\">Chromatic</code> 이라는 서비스를 알게 되었다. 🧐</p>\n<p>자동 배포를 위해 <code class=\"language-text\">Github Actions</code> 를 이용하였다.</p>\n<p><a href=\"https://www.chromatic.com/start\" class=\"brown-color\">Chromatic에 로그인</a> 을 하고 github repo와 동기화를 한다. 그럼 다음과 같은 화면이 나오게 될 것이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; margin: 2rem 0\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACIElEQVQ4y31TiWrbQBDV//9NG5zEV1ySNG0pKZQSQkrjQ4d1S3vIlmwpfmXGWVkWpYbHjme0b99c1raqUe3f4K4DeH4IP4jZzoRGnObw/AhprhCngpHmkv1kr4MIm3KPcteAeOi0yNjVBzw9v+BqOMZoPMVwNMHnh6+4vBri48UAHy4G+Pb9EePJDWafbjGa3GAyneH2/gFJJlhQS2jY9w2YmIL0+/X0zGSPP35icHmNu/svGE9nkHqL5nD6tquuVWhA8qMkRxhniJIMQZTADxMuBaXurUPESc7+TKiWzIAJq/eX6EUCkVJQbyoU2117Gpugii3//yeh43pwPB+262Npu3C9AIuVA12UbUp99FM9I7SzEkmuuDYEVZR8mmYR+kq6BN36kW0t3BDzpc2gOpHS14XN53zp4PefBYIobcemjySTHKeTFeZC85yRI3u3qTHmAjWIfLksOE7o2xQXanMkJCKhCi60+cCMkYFJ/X8ws2hRqkvbg+2ssVi5eJ2veFSI+AgNIQuuq1FjFHJMbdhnum6tbA8MJnQQxmlbArpo1syUgfxdsC8VPE5MSAUlRYwg5lXqfkxK9vUbo24OrCRXG1ZGMMqlqSEtOM0hqaPUiZi6u3I8LgF1e183jKZuoPVRtXmUsqE7bZcToZGIY03oxVPtTr7jRYlIVvB1g1hVvHpmKrozaQVyB1/uIIvzFeuvHaOsocoGuqzP/N1N+Qu2zL4KbKPBkwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"project-token\"\n        title=\"project-token\"\n        src=\"/static/91e64e2d9e35ccde1c86f5a5b4571a3a/5a190/project-token.png\"\n        srcset=\"/static/91e64e2d9e35ccde1c86f5a5b4571a3a/772e8/project-token.png 200w,\n/static/91e64e2d9e35ccde1c86f5a5b4571a3a/e17e5/project-token.png 400w,\n/static/91e64e2d9e35ccde1c86f5a5b4571a3a/5a190/project-token.png 800w,\n/static/91e64e2d9e35ccde1c86f5a5b4571a3a/84bf8/project-token.png 1162w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>여기서 중요한 점은 <code class=\"language-text\">--project-token</code> 뒤에 나와있는 값이다. 이 후 Github Actions에 사용될 토큰이다.</p>\n<p>해보지는 않았지만 자동 배포가 아닌 수동으로 위의 command line을 입력하여 배포할 수 있다고 한다.</p>\n<br>\n<h3>Github 액션 추가하기</h3>\n<p><code class=\"language-text\">Github Acitions</code> 를 이용하기 위해 프로젝트 <code class=\"language-text\">.github/workflows</code> 디렉토리 내에 <strong>chromatic.yml</strong> 을 추가하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># .github/workflows/chromatic.yml</span>\n\n<span class=\"token comment\"># Workflow name</span>\n<span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Chromatic Deployment'</span>\n\n<span class=\"token comment\"># Event for the workflow</span>\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span> push\n\n<span class=\"token comment\"># List of jobs</span>\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">test</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v1\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> yarn\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> chromaui/action@v1\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">projectToken</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.CHROMATIC_PROJECT_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.GH_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<p>secrets 를 이용하여 환경 변수를 사용하고 있기 때문에 프로젝트 secrets에 위의 토큰들을 등록해주어야 한다. 사용하는 프로젝트 repo의 settings로 들어가서 등록할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; margin: 2rem 0\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAADE0lEQVQ4y31U2ZKkOAys//+9nZg9pruruoAyp42NbxtyQ6Kmj4ddIjIssJBS58WFjGGSmJWG1Bvax4DVOJYfw4Sm6zFJDb15tGLELDUWZdA8etahf8dFwYYEYwMuuVTElBkhZTgfPt4JKReQTt2PUycmBunR3Xlf+J70LqVUzHKFDwm57EiZHJxGzLahaVr0w4D7vYGUCl8f6zxEP6AfJgzjBLNZXMjrY5g5FGM9U7c+wQVi4bGuGtoYKLWygxACQoyMVRuoVfO5WXcyJIO3e4frvYUYZ7iYYX2EjwVSKfx6eUXXdQwhBF7frmi7jpmTTCdBiB4xRlxiLuinBdOiIFfDzIilj5nZ0c/9OKMRM8ZZcdiLlMx4nheWSY9k59zJkJgROjFCW8/GiCklXmsNbQOkLXCxoNYKynvhs3zKtWLf99PgeyvYO4XKCM8chohWDGg6gabtMM6SU+E+7r+DiFyo7GKYubeY2ReF+GwLQvxokfq/YIbEgpp48/HDGDEtdce+V1xv72hbKswDt9s7g3JL58vrG67XG6y13Eps8N4JnpDNhU+GMT8N7pxLamZjNvzz6xU///obP37+CalWxJRgnUPKGcdxnCHT+EzP8WFjqWAzFvmpJJcF0zRBKYV5ntH3A4ZxhNYrpJQYpxEppdMgM2wFun7ERhVOFWbVUEJwFfcDUK5idQXaV4zKoxlWiMVidRXKFkYqxyfDrp9gXEAoB4xasQrBbM+QD5hQ4eIOlwjHJ+hb3GHjjly/GKR2oOZe+gFaCNAGOg1WfH+O/8ZxsPOLHx54//EHhtcXmPc3ZnXi3EI0PaveoPT20Uoh/Ub+BiJ3SauEfjRIcsIeA/ujyhJ9Xhz9hMcwQgwT1s1+GoqZ5VTq+Y3PjEs9gHsvsWyJjRH139GVWuCyx002aFcBEzfeQLSqqGApZYyLRHAefpYoxJBmcTGJK3Uu0h31GTYtzpgTTLBYvWE/9E2bDTkXTgvtxEzhOs/v56Q8er6gQtC0bM+Z5qaNDotV2KJlRrT/aJFa6+BDxDAt8NbBjjP37b9vxQRJUryJ3QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-secrets\"\n        title=\"github-secrets\"\n        src=\"/static/f077d7b4c2cb4ce638f9a13b58cd5622/5a190/github-secrets.png\"\n        srcset=\"/static/f077d7b4c2cb4ce638f9a13b58cd5622/772e8/github-secrets.png 200w,\n/static/f077d7b4c2cb4ce638f9a13b58cd5622/e17e5/github-secrets.png 400w,\n/static/f077d7b4c2cb4ce638f9a13b58cd5622/5a190/github-secrets.png 800w,\n/static/f077d7b4c2cb4ce638f9a13b58cd5622/c1b63/github-secrets.png 1200w,\n/static/f077d7b4c2cb4ce638f9a13b58cd5622/016a8/github-secrets.png 1576w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>공식 문서에는 <code class=\"language-text\">GITHUB_TOKEN</code> 으로 네이밍이 되어있는데 이제 GITHUB_ 로 시작하는 환경 변수는 사용할 수 없는 것 같다.</p>\n<br>\n<p>이제 push를 해보면 배포된 storybook을 chromatic을 통해 확인해볼 수 있다.</p>\n<p>배포된 url을 PR에서 공유해 코드를 리뷰하는 팀원이 해당 브랜치를 pull 받아서 실행해보지 않고도 UI를 확인해볼 수 있게 되었다. 😙</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; margin: 2rem 0\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACRUlEQVQ4y41Uh27kIBTc//+3uyhVyWVL1r3QbNYGbGBOYK+zuaZ70uiBwfPmFXv3cPcdrZB4KDp8O7d4rHrc5wKPldwQzg7S43hZENanAXhlBnd5h5d2xAvRaJTHjlEKZWacSoKcduiNA1czhLafUDP6yUMGzJ++W+8GHzDMHjusVtc1LlLiq/kVN3vvAO9vzj7hvMfOew/rPMZRoZcSlDFUdYO6aVBWNVpC0bQEbUvi87APPi9KKK0jVSC68uxCNOcRL+73B1DKFi3Owgc1cKuqFUGJc7DWRpJ4d1UcCf1KKLoeWZ6Dcg41e6jJQRkHqSwG7XDRLvpB240sKHNuwW8KQ5BxGEGlQMYMCj5F5GxBQgwqMaNgGlqbTdkVm8IrYZJmeHx6BmMc/zb/heivhMM4xkaEGoa1lBd0fQ/RdejlBUJ0mKb5zyFum+K3lD2apkGaZhHnc4I0y7E/HHH6OOOcpKiqOk5BS0j0hBAwzjHPS6AvCrkQKMoSQghM0wRjDGZro9dax5eUUhjHMWYQ/TBEH7q+EV4VFmWF98MRjIs1Dazdu1n/kuZ19K1zyyhdCcNZUCA4R1UWKLIUpG1AGQUjLQSnqKsSF9lBcBZrHevNWKx5QMhstm4lBKCnCe9ZjpdTjftjjedDjSxpkVITUXCDhGhUwoDyLk5DqGXTtiCEgodaboQeMIIhORzwsU9wenpF/baHFBdI7SHVMti9chiMgzHTVs8FKtZ5STl8XNZCp2fU7wmKH2fY4xugx5sfxP9ZIPwJHnDWE3VAnVcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"storybook-pr\"\n        title=\"storybook-pr\"\n        src=\"/static/b6da8592c052d3e5f1146b01d8cb09d4/5a190/storybook-pr.png\"\n        srcset=\"/static/b6da8592c052d3e5f1146b01d8cb09d4/772e8/storybook-pr.png 200w,\n/static/b6da8592c052d3e5f1146b01d8cb09d4/e17e5/storybook-pr.png 400w,\n/static/b6da8592c052d3e5f1146b01d8cb09d4/5a190/storybook-pr.png 800w,\n/static/b6da8592c052d3e5f1146b01d8cb09d4/c1b63/storybook-pr.png 1200w,\n/static/b6da8592c052d3e5f1146b01d8cb09d4/229ad/storybook-pr.png 1356w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>","frontmatter":{"date":"December 07, 2021","slug":"/posts/storybook","title":"Storybook 사용해보기","description":"들어보기만 했던 Storybook을 조금이라도 알고 사용해봅시다."}}},"pageContext":{"id":"cec92474-8cf9-5353-a90b-cdd73cc23768","frontmatter__slug":"/posts/storybook","__params":{"frontmatter__slug":"posts"}}},
    "staticQueryHashes": []}